name: Convert CSV to JSON
on:
push:
paths:
- 'data/*.csv'
jobs:
build:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v4
- name: Set up Python
uses: actions/setup-python@v4
with:
python-version: '3.x'
- name: Install pandas
run: pip install pandas
- name: Convert logos.csv to logos.json
run: |
python - << 'PY'
import pandas as pd, json
df = pd.read_csv('data/logos.csv')
recs = df.to_dict(orient='records')
with open('data/logos.json','w',encoding='utf-8') as f: json.dump(recs,f,ensure_ascii=False,indent=2)
PY
- name: Commit JSON
run: |
git config user.name 'github-actions'
git config user.email 'actions@github.com'
git add data/logos.json
git commit -m 'Auto-update logos.json from CSV' || echo 'no changes'
git push